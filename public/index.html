<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CITY‡§ú‡§® | Report and Track Civic Issues</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* ========================================================== */
        /* 1. ORIGINAL THEME RESTORED (Professional White/Navy)       */
        /* ========================================================== */

        :root {
            /* --- Original Color Palette --- */
            --primary-color: #000000;      /* Black Text */
            --secondary-color: #FAC9B8;    /* Peach Accent */
            --white: #ffffff;
            --light-grey: #f4f6f8;         /* Standard Light Grey */
            --dark-text: #000000;
            --footer-bg: #2F243A;          /* Deep Navy Footer */
            --accent-green: #25D366;       /* WhatsApp Green */
            
            /* --- Feature Colors --- */
            --upvote-color: #5cb85c; 
            --priority-high: #dc3545; 
            --priority-medium: #ffc107; 
            --priority-low: #17a2b8;
        }

        /* --- Global Resets --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        html { scroll-behavior: smooth; }
        
        body {
            line-height: 1.6;
            color: var(--dark-text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: var(--white);
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        main { flex-grow: 1; padding-bottom: 40px; }

        h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 40px;
            color: var(--primary-color);
            text-align: center;
        }

        /* --- Buttons --- */
        .btn {
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            display: inline-block;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .btn-primary { background-color: var(--primary-color); color: var(--white); }
        .btn-primary:hover { background-color: var(--footer-bg); transform: translateY(-3px); }
        
        .btn-secondary { background-color: transparent; border: 1px solid #ccc; color: #000; }
        .btn-secondary:hover { background-color: #f0f0f0; transform: translateY(-1px); }

        /* --- Header/Nav --- */
        header { position: sticky; top: 0; width: 100%; background-color: var(--white); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); z-index: 1000; padding: 15px 0; }
        nav { display: flex; justify-content: space-between; align-items: center; }
        
        .logo-link { text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .logo-text { font-size: 1.8rem; font-weight: 800; color: var(--primary-color); letter-spacing: -1px; }
        
        .nav-links { list-style: none; display: flex; align-items: center; gap: 25px; margin: 0; }
        .nav-links a { text-decoration: none; color: #000000; font-weight: 700; transition: color 0.2s; font-size: 1.05rem; }
        .nav-links a:hover { color: var(--footer-bg); }
        
        .nav-utilities { display: flex; align-items: center; gap: 15px; }
        .nav-phone { display: flex; align-items: center; gap: 8px; font-weight: 600; color: var(--footer-bg); }
        .nav-toggle { display: none; background: none; border: none; font-size: 1.5rem; color: var(--dark-text); cursor: pointer; }

        /* --- Live News Ticker --- */
        .news-ticker {
            background: var(--footer-bg);
            color: white;
            padding: 8px 0;
            overflow: hidden;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .ticker-content { display: inline-block; white-space: nowrap; animation: ticker 25s linear infinite; }
        .ticker-item { margin-right: 50px; }
        .ticker-item i { color: var(--secondary-color); margin-right: 5px; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* --- Hero Section --- */
        .main-hero { 
            padding: 120px 0; 
            text-align: center; 
            background: linear-gradient(rgba(47, 36, 58, 0.85), rgba(47, 36, 58, 0.7)), 
                        url('https://images.unsplash.com/photo-1444723121867-f6b984981989?q=80&w=2679&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            color: white;
        }
        .main-hero h1 { font-size: 3.5rem; margin-bottom: 1.5rem; font-weight: 800; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .main-hero p { font-size: 1.25rem; max-width: 700px; margin: 0 auto 2.5rem auto; opacity: 0.9; line-height: 1.6; }
        .hero-btn { font-size: 1.2rem; padding: 18px 40px; background: var(--secondary-color); color: var(--primary-color); box-shadow: 0 4px 15px rgba(250, 201, 184, 0.4); border: none; }
        .hero-btn:hover { background: white; transform: translateY(-3px); }

        /* --- Voice Search Bar (FIXED CSS) --- */
        .voice-search-wrapper {
            position: relative; max-width: 600px; margin: 0 auto 30px auto; display: flex; background: white; border-radius: 50px; padding: 5px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: transform 0.3s;
        }
        .voice-search-wrapper:hover { transform: scale(1.02); }
        
        /* FIX: This specific selector removes the global border */
        .voice-search-wrapper input.voice-input { 
            flex: 1; 
            border: none !important; 
            box-shadow: none !important;
            outline: none; 
            padding: 15px 25px; 
            border-radius: 50px; 
            font-size: 1.1rem; 
            color: #333; 
            background: transparent;
        }

        .mic-btn { background: var(--footer-bg); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: 0.3s; margin-right: 5px; }
        .mic-btn:hover { background: var(--secondary-color); color: var(--primary-color); }
        .mic-btn.listening { background-color: #ff4b4b; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 75, 75, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(255, 75, 75, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 75, 75, 0); } }

        /* --- Stats Section --- */
        .stats-section { background: var(--white); padding: 40px 0; margin-top: -50px; position: relative; z-index: 10; }
        .stats-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; 
            background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stat-item h3 { font-size: 2.5rem; margin: 0; color: var(--footer-bg); font-weight: 800; }
        .stat-item p { margin: 5px 0 0; color: #666; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px; }
        .stat-item i { font-size: 2rem; color: var(--secondary-color); margin-bottom: 10px; }

        /* --- Quick Track Section --- */
        .track-quick-section { padding: 80px 0; text-align: center; background: var(--light-grey); }
        .track-quick-section h2 { color: var(--primary-color); }
        .track-quick-form { display: flex; justify-content: center; gap: 10px; max-width: 500px; margin: 20px auto 0; }
        
        /* --- Global Inputs --- */
        input[type="text"], input[type="tel"], input[type="password"] { width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; box-sizing: border-box; transition: border-color 0.3s, box-shadow 0.3s; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        input:focus { outline: none; border-color: var(--footer-bg); }
        .form-card { max-width: 700px; margin: 40px auto; padding: 40px; background: var(--white); border-radius: 12px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1); }
        
        /* --- Map Section --- */
        .map-section { padding: 80px 0; background: var(--white); }
        .section-title { text-align: center; margin-bottom: 40px; }
        .map-container {
            height: 400px; width: 100%; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); position: relative; background: #eee;
        }
        .map-overlay { position: absolute; top: 20px; right: 20px; background: white; padding: 10px 20px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); font-weight: bold; display: flex; align-items: center; gap: 10px; }

        /* --- Leaderboard --- */
        .leaderboard-section { padding: 80px 0; background: linear-gradient(to bottom, #ffffff, #f9f9f9); text-align: center; }
        .leaderboard-grid { display: flex; justify-content: center; align-items: flex-end; gap: 20px; margin-top: 40px; flex-wrap: wrap; }
        .leader-card { background: white; padding: 30px 20px; border-radius: 15px; width: 220px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.08); transition: transform 0.3s ease; border: 1px solid #eee; }
        .leader-card:hover { transform: translateY(-10px); }
        .rank-1 { padding: 50px 20px; border: 2px solid #FFD700; background: #fffdf0; z-index: 2; box-shadow: 0 15px 40px rgba(255, 215, 0, 0.2); }
        .crown { font-size: 3rem; position: absolute; top: -30px; left: 50%; transform: translateX(-50%); animation: bounce 2s infinite; }
        .avatar { width: 70px; height: 70px; background: var(--footer-bg); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; margin: 0 auto 15px; border: 3px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .winner-avatar { width: 90px; height: 90px; font-size: 2rem; background: linear-gradient(135deg, #FFD700, #FFA500); }
        .rank-badge { position: absolute; top: -10px; right: -10px; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .silver { background: #C0C0C0; }
        .bronze { background: #CD7F32; }
        @keyframes bounce { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-10px); } }

        /* --- How It Works --- */
        .how-it-works-section { padding: 80px 0; text-align: center; background-color: #fafafa; }
        .process-steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .step-card { padding: 2.5rem; border-radius: 15px; background: var(--white); box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); transition: all 0.3s; text-align: left; border-bottom: 5px solid transparent; }
        .step-card:hover { transform: translateY(-10px); box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1); border-bottom-color: var(--footer-bg); }
        .step-card i { font-size: 2.5rem; color: var(--footer-bg); margin-bottom: 1.5rem; background: var(--secondary-color); padding: 15px; border-radius: 10px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; }
        .step-card h3 { font-size: 1.4rem; color: var(--primary-color); margin-bottom: 0.8rem; }
        .step-card p { color: #666; line-height: 1.6; }

        /* --- Footer --- */
        footer { background: var(--footer-bg); color: #ffffff; padding: 60px 0 30px; text-align: center; margin-top: auto; }
        footer p { opacity: 0.8; }
        footer a { color: var(--white); text-decoration: none; font-weight: 500; margin: 0 10px; transition: 0.3s; }
        footer a:hover { color: var(--secondary-color); }

        /* --- Utilities --- */
        .whatsapp-float { position: fixed; bottom: 30px; right: 30px; z-index: 1000; display: flex; align-items: center; justify-content: center; width: 65px; height: 65px; border-radius: 50%; background-color: var(--accent-green); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); transition: transform 0.3s ease; }
        .whatsapp-float:hover { transform: scale(1.1) translateY(-5px); }
        .whatsapp-float img { width: 35px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }

        /* --- LOGIN MODAL --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-content { background: #fff; width: 90%; max-width: 400px; border-radius: 15px; overflow: hidden; position: relative; animation: slideDown 0.3s ease; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .close-modal { position: absolute; right: 20px; top: 20px; font-size: 1.8rem; cursor: pointer; color: #fff; z-index: 10; transition: 0.2s; }
        .close-modal:hover { transform: scale(1.1); }
        .login-header { background: var(--footer-bg); padding: 40px 30px 30px; text-align: center; color: white; }
        .login-header h2 { margin: 0; font-size: 2rem; font-weight: 800; }
        .login-header p { opacity: 0.8; margin-top: 5px; }
        .login-tabs { display: flex; background: #eee; }
        .tab-btn { flex: 1; padding: 15px; border: none; background: transparent; cursor: pointer; font-weight: bold; color: #666; transition: 0.3s; }
        .tab-btn.active { background: #fff; color: var(--footer-bg); border-bottom: 4px solid var(--footer-bg); }
        .form-box { display: none; padding: 30px; }
        .form-box.active { display: block; animation: fadeIn 0.4s; }
        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; margin-bottom: 8px; font-size: 0.9rem; font-weight: 600; color: #444; }
        .btn-full { width: 100%; padding: 14px; background: var(--primary-color); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-full:hover { background: var(--footer-bg); }
        @keyframes slideDown { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- Responsive --- */
        @media (max-width: 900px) { .nav-links { display: none; } .nav-toggle { display: block; } }
        @media (max-width: 768px) {
            .nav-utilities { gap: 10px; flex-grow: 1; justify-content: flex-end; }
            .nav-phone { display: none; }
            .stats-grid { grid-template-columns: 1fr; }
            .leaderboard-grid { flex-direction: column; align-items: center; }
            .leader-card { width: 100%; max-width: 300px; }
            .rank-1 { order: -1; }
        }
    </style>
</head>
<body>

    <div class="news-ticker">
        <div class="ticker-content">
            <span class="ticker-item"><i class="fa-solid fa-circle-check"></i> <b>Just Fixed:</b> Pothole reported in Gomti Nagar (Ticket #CYJ921)</span>
            <span class="ticker-item"><i class="fa-solid fa-triangle-exclamation"></i> <b>Alert:</b> Road maintenance scheduled for Hazratganj Main Road tomorrow.</span>
            <span class="ticker-item"><i class="fa-solid fa-trophy"></i> <b>Achievement:</b> 1,000+ Complaints Resolved this month!</span>
            <span class="ticker-item"><i class="fa-solid fa-cloud-bolt"></i> <b>Weather:</b> Heavy rain expected, please report waterlogging immediately.</span>
        </div>
    </div>

    <header>
        <nav class="container">
            <a href="index.html" class="logo-link">
                <span class="logo-text">CITY‡§ú‡§®</span>
            </a>
            
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="report.html">Report a Problem</a></li>
                <li><a href="track.html">Track My Complaint</a></li>
            </ul>

            <div class="nav-utilities">
                <div class="nav-phone">
                    <i class="fa-solid fa-phone-volume"></i>
                    <strong>1800-999-999</strong>
                </div>
                <button onclick="openLoginModal()" class="btn btn-primary">Login / Signup</button>
                <button class="nav-toggle">‚ò∞</button>
            </div>
        </nav>
    </header>

    <main>
        <section class="main-hero">
            <div class="container">
                <h1>Make Your City Better, Together.</h1>
                <p>Spot an issue? Just say it. Our AI will handle the rest.</p>
                
                <div class="voice-search-wrapper">
                    <input type="text" id="voice-input" class="voice-input" placeholder="Tap the mic & say: 'Broken streetlight in Sector 4...'">
                    <button id="mic-btn" class="mic-btn" title="Start Voice Recording">
                        <i class="fa-solid fa-microphone"></i>
                    </button>
                </div>

                <a href="report.html" class="btn hero-btn">Or Submit Detailed Report <i class="fa-solid fa-arrow-right"></i></a>
            </div>
        </section>

        <section class="stats-section">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-item">
                        <i class="fa-solid fa-clipboard-check"></i>
                        <h3>3,842</h3>
                        <p>Issues Reported</p>
                    </div>
                    <div class="stat-item">
                        <i class="fa-solid fa-hammer"></i>
                        <h3>2,915</h3>
                        <p>Issues Fixed</p>
                    </div>
                    <div class="stat-item">
                        <i class="fa-solid fa-users"></i>
                        <h3>14,200+</h3>
                        <p>Active Citizens</p>
                    </div>
                    <div class="stat-item">
                        <i class="fa-solid fa-clock"></i>
                        <h3>36 Hrs</h3>
                        <p>Avg. Response Time</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="track-quick-section">
            <div class="container">
                <h2>Track Your Report Status</h2>
                <p>Transparency is key. Enter your Ticket ID to see real-time updates.</p>
                <form class="track-quick-form" id="quick-track-form">
                    <input type="text" id="quick-ticket-id" name="ticket-id" placeholder="Enter Ticket ID (e.g., CYJ12345)" required>
                    <button type="submit" class="btn btn-primary">Track</button>
                </form>
            </div>
        </section>
        
        <section class="map-section">
            <div class="container">
                <div class="section-title">
                    <h2>Live Issue Map</h2>
                    <p>View open complaints and resolution progress across the city.</p>
                </div>
                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d227822.5503562735!2d80.8024271802919!3d26.84862299412667!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x399bfd991f32b16b%3A0x93ccba23b1198f75!2sLucknow%2C%20Uttar%20Pradesh!5e0!3m2!1sen!2sin!4v1700000000000!5m2!1sen!2sin" 
                        width="100%" 
                        height="100%" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy">
                    </iframe>
                    <div class="map-overlay">
                        <i class="fa-solid fa-circle-dot" style="color: red; animation: blink 1.5s infinite;"></i> Live Feed
                    </div>
                </div>
            </div>
        </section>

        <section class="leaderboard-section">
            <div class="container">
                <div class="section-title">
                    <h2>Top City Heroes üèÜ</h2>
                    <p>These citizens are making the biggest impact this month.</p>
                </div>
                
                <div class="leaderboard-grid">
                    <div class="leader-card rank-2">
                        <div class="rank-badge silver">#2</div>
                        <div class="avatar">JS</div>
                        <h3>Jayant Singh</h3>
                        <p class="points">980 pts</p>
                        <p class="reports-count">18 Issues Fixed</p>
                    </div>

                    <div class="leader-card rank-1">
                        <div class="crown">üëë</div>
                        <div class="avatar winner-avatar">SN</div>
                        <h3>Sujal Negi</h3>
                        <p class="points highlight">1,250 pts</p>
                        <p class="reports-count">25 Issues Fixed</p>
                    </div>

                    <div class="leader-card rank-3">
                        <div class="rank-badge bronze">#3</div>
                        <div class="avatar">AG</div>
                        <h3>Ayush Gupta</h3>
                        <p class="points">850 pts</p>
                        <p class="reports-count">15 Issues Fixed</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="how-it-works-section" id="howitworks">
            <div class="container">
                <div class="section-title">
                    <h2>How It Works</h2>
                    <p>Four simple steps to a cleaner, safer city.</p>
                </div>
                <div class="process-steps">
                    <div class="step-card">
                        <i class="fa-solid fa-camera"></i>
                        <h3>1. Snap & Submit</h3>
                        <p>Take a photo of the issue, fill out the simple form with details, and hit submit.</p>
                    </div>
                    <div class="step-card">
                        <i class="fa-solid fa-map-location-dot"></i>
                        <h3>2. Review & Assign</h3>
                        <p>Our AI system verifies the location and assigns it to the nearest municipal team.</p>
                    </div>
                    <div class="step-card">
                        <i class="fa-solid fa-screwdriver-wrench"></i>
                        <h3>3. Quick Resolution</h3>
                        <p>The assigned team takes action on the ground. You get notified upon completion.</p>
                    </div>
                    <div class="step-card">
                        <i class="fa-solid fa-star"></i>
                        <h3>4. Rate Service</h3>
                        <p>Confirm the fix and rate the speed of the service. Feedback drives improvement.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <h2>CITY‡§ú‡§®</h2>
            <p>Empowering citizens to build better cities.</p>
            <div style="margin: 20px 0;">
                <a href="#">Privacy Policy</a> | 
                <a href="#">Terms of Service</a> | 
                <a href="#">Contact Support</a>
            </div>
            <p>¬© 2025 CITY‡§ú‡§® | All Rights Reserved</p>
        </div>
    </footer>

    <a href="https://wa.me/919580336977?text=Hi%20CITY‡§ú‡§®,%20I%20want%20to%20report%20a%20civic%20issue." class="whatsapp-float" target="_blank" title="Chat on WhatsApp">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1024px-WhatsApp.svg.png" alt="WhatsApp">
    </a>

    <div id="loginModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal" onclick="closeLoginModal()">√ó</span>
            
            <div class="login-header">
                <h2>CITY‡§ú‡§®</h2>
                <p>Login to access your dashboard</p>
            </div>

            <div class="login-tabs">
                <button class="tab-btn active" onclick="switchTab('citizen')">Citizen</button>
                <button class="tab-btn" onclick="switchTab('official')">Official</button>
            </div>

            <div id="citizen-form" class="form-box active">
                <form onsubmit="event.preventDefault(); handleCitizenLogin();">
                    <div class="input-group">
                        <label>Mobile Number</label>
                        <input type="tel" id="cit-mobile" placeholder="+91 98765 43210" required>
                    </div>
                    <div class="input-group">
                        <label>OTP (Use: 1234)</label>
                        <input type="text" id="cit-otp" placeholder="Enter OTP" required>
                    </div>
                    <button type="submit" class="btn-full">Login Securely</button>
                </form>
            </div>

            <div id="official-form" class="form-box">
                <form onsubmit="event.preventDefault(); handleOfficialLogin();">
                    <div class="input-group">
                        <label>Officer ID (Use: admin)</label>
                        <input type="text" id="off-id" placeholder="LKO-ADMIN-01" required>
                    </div>
                    <div class="input-group">
                        <label>Password (Use: admin123)</label>
                        <input type="password" id="off-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="btn-full" style="background: var(--footer-bg);">Access Admin Panel</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // --- Voice Recognition Logic (AdBlocker Proof) ---
        const micBtn = document.getElementById('mic-btn');
        const voiceInput = document.getElementById('voice-input');
        
        // 1. Check Browser Support
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

        if (!SpeechRecognition) {
            micBtn.style.display = 'none'; // Hide if not supported
        } else {
            const recognition = new SpeechRecognition();
            
            // Settings
            recognition.continuous = false; 
            recognition.lang = 'en-IN'; 
            recognition.interimResults = false;

            // 2. Button Click Handler
            micBtn.addEventListener('click', () => {
                if (micBtn.classList.contains('listening')) {
                    recognition.stop();
                } else {
                    try {
                        recognition.start();
                    } catch (err) {
                        // Determine if it's a restart error or actual start error
                        console.warn("Mic restart:", err);
                    }
                }
            });

            // 3. Events
            recognition.onstart = () => {
                micBtn.classList.add('listening');
                voiceInput.placeholder = "Listening... Speak now...";
            };

            recognition.onend = () => {
                micBtn.classList.remove('listening');
                if (voiceInput.value === '') {
                    voiceInput.placeholder = "Tap the mic & say: 'Broken streetlight...'";
                }
            };

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                voiceInput.value = transcript;
            };

            // 4. ERROR HANDLING (Fixes the AdBlock Issue)
            recognition.onerror = (event) => {
                console.error("Speech Error:", event.error);
                micBtn.classList.remove('listening');

                if (event.error === 'network') {
                    alert("‚ö†Ô∏è Voice Blocked by Extension or Network\n\nIt looks like an AdBlocker or Brave Shield is blocking the Google Speech API.\n\nFIX: Disable your AdBlocker for this site and refresh.");
                } 
                else if (event.error === 'not-allowed') {
                    alert("Microphone Permission Denied.\nPlease click the 'lock' icon in the URL bar and allow Microphone access.");
                }
            };
        }

        // --- Login Modal Logic ---
        const modal = document.getElementById('loginModal');
        function openLoginModal() { modal.style.display = 'flex'; }
        function closeLoginModal() { modal.style.display = 'none'; }
        window.onclick = function(event) { if (event.target == modal) modal.style.display = "none"; }

        function switchTab(role) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.form-box').forEach(form => form.classList.remove('active'));
            if(role === 'citizen') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('citizen-form').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('official-form').classList.add('active');
            }
        }

        function handleCitizenLogin() {
            const otp = document.getElementById('cit-otp').value;
            if (otp === "1234") {
                alert("Login Successful! Redirecting to Citizen Dashboard...");
                window.location.href = "dashboard.html";
            } else {
                alert("Invalid OTP! Use '1234' for testing.");
            }
        }

        function handleOfficialLogin() {
            const officerId = document.getElementById('off-id').value;
            const password = document.getElementById('off-pass').value;
            if (officerId === "admin" && password === "admin123") {
                alert("Welcome Officer! Redirecting to Admin Panel...");
                window.location.href = "admin-dashboard.html";
            } else {
                alert("Invalid Credentials! Use 'admin' and 'admin123'.");
            }
        }

        document.getElementById('quick-track-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const ticketId = document.getElementById('quick-ticket-id').value.trim();
            if (ticketId) {
                alert(`Tracking Ticket ID: ${ticketId}\nStatus: In Progress`);
            } else {
                alert("Please enter a Ticket ID.");
            }
        });
    </script>
</body>

</html>

